; PHP OPcache Configuration for Production

; Enable OPcache
opcache.enable=1
opcache.enable_cli=1

; Memory Settings
opcache.memory_consumption=256
opcache.interned_strings_buffer=16
opcache.max_accelerated_files=20000

; Performance Settings
opcache.revalidate_freq=60
opcache.fast_shutdown=1
opcache.validate_timestamps=0

; File Cache Settings
opcache.file_cache=/var/tmp/opcache
opcache.file_cache_only=0
opcache.file_cache_consistency_checks=1

; Optimization Level
opcache.optimization_level=0x7FFFFFFF

; JIT Settings (PHP 8.0+)
opcache.jit=1255
opcache.jit_buffer_size=128M

; Error Logging
opcache.error_log=/var/log/php-opcache-errors.log
opcache.log_verbosity_level=2

; Preloading (uncomment and set path)
; opcache.preload=/path/to/preload.php
; opcache.preload_user=www-data

; Protect Against Cache Stampedes
opcache.lockfile_path=/var/tmp

; Statistics
opcache.enable_file_override=1
opcache.max_file_size=0
opcache.consistency_checks=0

; Blacklist (optional)
; opcache.blacklist_filename=/etc/php/opcache-blacklist.txt
